'Primary' event JSONSchemas for Wikimedia & MediaWiki event data.

This schema repository contains event schemas that directly affect
user-facing features.  These schemas are meant to represent 'tier 1' events.
This repository complements the [schemas/event/secondary](https://gerrit.wikimedia.org/r/plugins/gitiles/schemas/event/secondary/+/master) repository.

See also:
- [Event Platform/Schemas](https://wikitech.wikimedia.org/wiki/Event_Platform/Schemas)
- [Event Platform/Schemas/Guidelines](https://wikitech.wikimedia.org/wiki/Event_Platform/Schemas/Guidelines)


NOTE: The only reason for having separate event schema repositories is to
allow for different repository merge rights.  Changes to primary schemas need
to be more restricted than changes to secondary schemas.

## Contributing

Most files in this repo are automatically generated by [jsonschema-tools](https://github.com/wikimedia/jsonschema-tools) and must not be changed after their initial creation.

**Follow the [Event Platform Schema Guidelines](https://wikitech.wikimedia.org/wiki/Event_Platform/Schemas/Guidelines)** when creating or updating schemas.

Prerequisites:

* A clone of this Git repository.
* Run `npm install`.

To update a schema:

1. Edit the `current.yaml` file, and remember to increment the version in the `$id` field.
2. Run `npm run build-modified`, which generates the versioned YAML and JSON files.
3. Commit the new and changed files to Git, and submit them for code review.

To create a schema:

1. Create a subdirectory for the schema under one of the `jsonschema/` namespace directories,
   and draft the first version in a new `current.yaml` file.
2. Run `npm run build-new path/to/your/current.yaml`, which generates the
   versioned YAML and JSON files.
3. Commit the new files to Git, and submit them for code review.

## See also

- [Event Platform/Schemas](https://wikitech.wikimedia.org/wiki/Event_Platform/Schemas)
- [Event Platform/Schemas/Guidelines](https://wikitech.wikimedia.org/wiki/Event_Platform/Schemas/Guidelines)
- [Event Platform/Instrumentation How To](https://wikitech.wikimedia.org/wiki/Event_Platform/Instrumentation_How_To)
- [Event Platform/Analytics/Fragments](https://wikitech.wikimedia.org/wiki/Event_Platform/Analytics/Fragments)
